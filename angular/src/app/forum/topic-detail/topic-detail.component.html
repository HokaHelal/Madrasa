<app-content-header [title]="'Topic'"></app-content-header>
<div class="card">
  <div class="card-header p-2">
    <ul class="nav nav-pills text-center">
      <h5>{{ topic.title }}</h5>
    </ul>
  </div>
  <!-- /.card-header -->
  <div class="card-body">
    <!-- Post -->
    <div class="post">
      <div class="user-block">
        <img
          class="img-circle img-bordered-sm"
          src="{{ topic.authorPhoto }}"
          alt="user image"
        />
        <span class="username">
          <a href="#">{{ topic.authorName }}</a>
        </span>
        <span class="description"
          >Shared publicly - {{ topic.created | date: "medium" }}</span
        >
      </div>
      <!-- /.user-block -->
      <quill-view-html 
      [content]="topic.content"
      theme="snow"></quill-view-html>
  

      <p>
        <button
          type="button"
          class="btn btn-sm link"
          (click)="toggleLike()"
          [ngClass]="{ 'btn-success': isLiked, 'btn-default': !isLiked }"
        >
          <i class="far fa-thumbs-up"></i> Like
        </button>
        <a (click)="openModal()" class="float-right text-muted "
          ><u>{{ topic.likes.length }} likes </u></a
        >
      </p>
    </div>

    <!-- /.post -->
  </div>
</div>

<div class="card" style="background-color: #f7fbfd">
  <div class="card-header"></div>
  <!-- /.card-header -->
  <div class="card-body">
    <app-post-detail
      *ngFor="let post of topic.posts"
      [postData]="post"
    ></app-post-detail>
  </div>
</div>
<form [formGroup]="editForm">

<div class="card">
  <div class="card-header"><strong>Submit Reply</strong></div>
  <!-- /.card-header -->
  <div class="card-body">
    <quill-editor [modules]="modules" 
                  formControlName="editor"
    ></quill-editor>
    <div style="background-color: #f7fbfd" *ngIf="previewReply"
    class="border mt-1">
    <quill-view-html 
    [content]="previewReply"
    theme="snow"></quill-view-html>
  </div>
    
  </div>
  <div class="card-footer">
    <div class="text-right">
      <button [disabled]="!editForm.valid" (click)="onPreview()" class="btn btn-md bg-teal mr-1">
        <i class="fas fa-eye mr-2"></i> <strong>Preivew</strong> 
      </button>
      <button [disabled]="!editForm.valid" (click)="onClear()" class="btn btn-md btn-danger mr-1">
        <i class="fas fa-eraser mr-2"></i> <strong>Clear</strong> 
      </button>
      <button [disabled]="!editForm.valid" (click)="onSubmit()" class="btn btn-md btn-primary">
        <i class="fas fa-paper-plane mr-2"></i> <strong>Submit</strong> 
      </button>
    </div>
  </div>
</div>
</form>
